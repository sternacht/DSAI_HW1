# DSAI_HW1
## 目錄

- [成員](#成員)
- [目標](#目標)
- [使用資料來源](#使用資料來源)
- [資料處理](#資料處理)
- [星期分析](#星期分析)
- [年份分析](#年份分析)
- [計算結果](#計算結果)
## 成員
E94076194 黃彤洋
E94076186 許中瑋

## 目標
預測2022/3/30~2022/4/13台電的備轉容量
## 使用資料來源
[台灣電力公司_過去電力供需資訊](https://data.gov.tw/dataset/19995)
- 2021/1/1 ~ 2022/2/28
- `日期`、`淨尖峰供電能力(MW)`、`尖峰負載(MW)`、`備轉容量(MW)`、`備轉容量率(%)`...

[台灣電力公司_近三年每日尖峰備轉容量率](https://data.gov.tw/dataset/24945)
- 2019/1/1 ~ 2021/12/31
- `日期`、`備轉容量(萬瓩)`、`備轉容量率(%)`
- 1 萬瓩 = 10 MW
## 資料處理

根據兩個公式

**備轉容量 ＝ 淨尖峰供電能力 － 當日系統尖峰負載**

**備轉容量率 ＝ 當日備轉容量 ÷ 當日系統尖峰負載 × 100**

我們可以利用`備轉容量`與`備轉容量率`得出`尖峰負載`，接著再利用`備轉容量`與`尖峰負載`得出`淨尖峰供電`。

---------------

接著將2019、2020、2021、2022不同年度至 3 月初的資料分別以不同的顏色呈現

### 淨尖峰供電
![](https://i.imgur.com/aGDgtij.png)

### 尖峰負載
![](https://i.imgur.com/7vNzyzb.png)

可以從圖中發現三個特徵

1.數據會成週期性變化:
`尖峰負載`與`淨尖峰供電`都會週期性的變化，且仔細觀察會發現皆以 7 天為周期變化，週期的低點則是對應到星期日。

2.每個年度的平均不同:
每個年度的周期平均因為年度不同會有明顯的高低落差，例如紅色的平均上街比綠色的低。

3.皆有著一個明顯的大下降區段:
觀察可以發現該區段為當年的過年期間。

-----------------------

接著將資料整理成整理training_data.csv，其中包含了
- 2019/1/1 ~  2022/2/28的資料
-  `date`、`week`、`尖峰供電能力(MW)`、`尖峰負載(MW)`4個欄位

`week`欄位儲存了日期對應的星期

## 星期分析
由前面的觀察我們可以得知`尖峰負載`與`淨尖峰供電`會隨著星期的不同而變化，因此於是我們將所有不同星期的`尖峰負載`與`淨尖峰供電`相加後取平均

淨尖峰供電平均

![](https://i.imgur.com/eUhLKrh.png)

尖峰負載平均

![](https://i.imgur.com/BvQa0a3.png)

將兩者同時繪製成圖表

![](https://i.imgur.com/r5acMqv.png)

可以發現`尖峰負載`與`淨尖峰供電`在星期上皆有著相同的趨勢，在這個結果下，我們可以假設除星期以外條件完全相同的兩日，若我們要用舊有的數據去預測，我們可以以平均計算比例去預測。

**預測天數的數值 = 原有天數的數值 * (預測天數的星期平均 / 原有天數的星期平均)**

若是有一個日期為3/11，則在除星期外的所有條件皆不動的情況下，當3/11從星期一換成星期日，我們可以認為:

**預測尖峰供電 = 原有尖峰供電 * (星期日的平均/星期一的平均)**

將上面的平均帶入:

**預測尖峰供電 = 原有尖峰供電 * (30842.055/35098.009)**

相同的做法也可以套用在`尖峰負載`

## 年份分析
由前面的觀察我們也得知，19、20、21、22在前2個月都有不一樣的平均，我們將前3個年份與本年度皆取到2/28的數據平均所得出的結果為

![](https://i.imgur.com/0m6fB0K.png)

分別為: **前三年平均淨尖峰供電, 前三年平均尖峰負載, 今年平均淨尖峰供電, 今年平均尖峰負載**

若是在其他條件相同下，若是我們用前3年的同一個日期的數據來推測今年的，則可以用此平均來做計算

**今年的預測數值 = (19年的數值 + 20年的數值 + 21年的數值) / 3 * (今年的平均 / 前3年的平均)**

## 計算結果
若是我們要計算尖峰供電，將年分與星期的因素同時考量進去

星期比重**w<sub>i</sub> = 今年預測天數的星期平均 / i年預測天數的星期平均**

**預測的尖峰供電 = (19年的數據 * w<sub>19</sub> + 20年的數據 * w<sub>20</sub> + 21年的數據 * w<sub>21</sub>) / 3 * (今年的平均 / 前3年的平均)**
